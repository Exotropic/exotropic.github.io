<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EXOTROPIC AQUARIUM Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { 
  font-family: Arial, sans-serif; 
  margin:0; padding:0; 
  background: linear-gradient(135deg, #a8edea, #fed6e3); 
  min-height:100vh; 
  display:flex; 
  justify-content:center; 
  align-items:flex-start;
  padding-top:50px;
}
h1 { text-align:center; color:#333; }

#passwordPrompt, #adminContent {
  max-width: 450px; width: 90%; 
  background: rgba(255,255,255,0.95); 
  padding: 25px 30px; border-radius: 15px; 
  box-shadow: 0 8px 25px rgba(0,0,0,0.15); 
  margin-bottom:30px;
}

input[type=password], input[type=text] { 
  padding:10px; width:70%; border-radius:5px; 
  border:1px solid #ccc; margin-right:5px; transition:0.3s;
}

button { 
  padding:10px; border:none; border-radius:5px; 
  cursor:pointer; transition:0.3s; 
  background:#333; color:#fff; margin-top:5px;
}
button:hover { background:#555; }

#adminContent { display:none; margin-top:20px; }

.image-card { 
  display:inline-block; margin:10px; border:1px solid #ccc; 
  padding:10px; background: #f9f9f9; border-radius:6px; transition:0.3s; 
  position: relative;
}
.image-card:hover { transform: scale(1.05); }
.image-card img { width:150px; height:150px; object-fit:cover; display:block; margin-bottom:5px; border-radius:5px; }

.url { font-size:12px; word-break:break-all; }

.deleteBtn {
  position: absolute;
  top:5px;
  right:5px;
  background:#ff4d4d;
  border:none;
  color:white;
  padding:2px 6px;
  border-radius:4px;
  cursor:pointer;
  font-size:12px;
}

.deleteBtn:hover { background:#ff1a1a; }

#togglePassBtn { width:25%; }

/* Back to Home Button */
#backHomeBtn {
  position: fixed; bottom: 20px; right: 20px; 
  background: #333; color: #fff; padding: 10px 15px; 
  border-radius: 50px; text-decoration: none; font-weight: bold; 
  box-shadow: 0 5px 15px rgba(0,0,0,0.2); transition: 0.3s; z-index: 1000;
}
#backHomeBtn:hover { background: #555; transform: scale(1.1); }
</style>
</head>
<body>

<div id="passwordPrompt">
  <h1>EXOTROPIC AQUARIUM Admin</h1>
  <label>Admin Username:</label><br>
  <input type="text" id="adminUsername" placeholder="Enter Username"><br><br>

  <label>Admin Password:</label><br>
  <input type="password" id="adminPassword">
  <button type="button" id="togglePassBtn">Show Password</button><br><br>

  <button onclick="checkPassword()">Login</button>
</div>

<div id="adminContent">
<h2>Upload Product Image</h2>
<input type="file" id="fileInput">
<button id="uploadBtn">Upload</button>

<h2>Uploaded Images</h2>
<div id="imagesContainer">No images yet.</div>
</div>

<a href="https://exotropic.github.io/" id="backHomeBtn">üè† Home</a>

<script>
const cloudName = 'dgmg1cubi';
const unsignedUploadPreset = 'unsigned_products';
const folderName = 'products';
const adminUsernameValue = 'EXOTROPIC';
const adminPasswordValue = 'CANADAEXOTROPIC';

// localStorage will hold uploaded images
let uploadedImages = JSON.parse(localStorage.getItem('uploadedImages') || '[]');

const passwordInput = document.getElementById('adminPassword');
const toggleBtn = document.getElementById('togglePassBtn');
const imagesContainer = document.getElementById('imagesContainer');
const fileInput = document.getElementById('fileInput');
const uploadBtn = document.getElementById('uploadBtn');

function checkPassword() {
  const user = document.getElementById('adminUsername').value;
  const pass = passwordInput.value;
  if(user === adminUsernameValue && pass === adminPasswordValue) {
    document.getElementById('passwordPrompt').style.display = 'none';
    document.getElementById('adminContent').style.display = 'block';
    renderImages();
  } else alert('Wrong username or password');
}

// Show/hide password
toggleBtn.addEventListener('click', ()=>{
  if(passwordInput.type === 'password'){
    passwordInput.type = 'text';
    toggleBtn.textContent = 'Hide Password';
  } else {
    passwordInput.type = 'password';
    toggleBtn.textContent = 'Show Password';
  }
});

// Upload image (unsigned)
uploadBtn.addEventListener('click', ()=>{
  const file = fileInput.files[0];
  if(!file){ alert('Select a file first'); return; }

  const formData = new FormData();
  formData.append('file', file);
  formData.append('upload_preset', unsignedUploadPreset);
  formData.append('folder', folderName);

  fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
    method:'POST', body: formData
  })
  .then(res => res.json())
  .then(data=>{
    if(data.secure_url){
      uploadedImages.push(data.secure_url);
      localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
      fileInput.value = '';
      renderImages();
      alert('Upload successful!');
    } else alert('Upload failed');
  })
  .catch(err => { console.error(err); alert('Upload failed'); });
});

// Delete image from localStorage
function deleteImage(index){
  if(!confirm('Are you sure you want to delete this image?')) return;
  uploadedImages.splice(index,1);
  localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
  renderImages();
}

// Render images from localStorage
function renderImages(){
  imagesContainer.innerHTML = '';
  if(uploadedImages.length === 0){
    imagesContainer.innerHTML = 'No images yet.';
    return;
  }
  uploadedImages.forEach((url, index)=>{
    const div = document.createElement('div');
    div.className = 'image-card';
    div.innerHTML = `
      <img src="${url}" alt="">
      <div class="url">${url}</div>
      <button class="deleteBtn" onclick="deleteImage(${index})">Delete</button>
    `;
    imagesContainer.appendChild(div);
  });
}
</script>

</body>
</html>
